/*!
 * jQuery Birthday Picker: v1.2 - 3/21/2011
 * http://abecoffman.com/stuff/birthdaypicker
 * 
 * Copyright (c) 2010 Abe Coffman
 * Dual licensed under the MIT and GPL licenses.
 * 
 */
(function(f){var a={"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"long":["January","February","March","April","May","June","July","August","September","October","November","December"]},b=new Date(),c=b.getFullYear(),e=b.getMonth()+1,d=b.getDate();f.fn.birthdaypicker=function(g){var h={maxAge:120,futureDates:false,maxYear:c,dateFormat:"middleEndian",monthFormat:"short",placeholder:true,legend:"",defaultDate:false,hiddenDate:true};return this.each(function(){if(g){f.extend(h,g)}var r=f("<fieldset class='birthday-picker'></fieldset>"),q=f("<select class='birth-year' name='birth[year]'></select>"),p=f("<select class='birth-month' name='birth[month]'></select>"),m=f("<select class='birth-day' name='birth[day]'></select>");if(h.legend){f("<legend>"+h.legend+"</legend>").appendTo(r)}var n;if(h.dateFormat=="bigEndian"){n=c+"-"+e+"-"+d;r.append(q).append(p).append(m)}else{if(h.dateFormat=="littleEndian"){n=d+"-"+e+"-"+c;r.append(m).append(p).append(q)}else{r.append(p).append(m).append(q);n=e+"-"+d+"-"+c}}if(h.placeholder){f("<option value='0'>Year:</option>").appendTo(q);f("<option value='0'>Month:</option>").appendTo(p);f("<option value='0'>Day:</option>").appendTo(m);n=null}if(h.defaultDate){n=h.defaultDate}if(h.hiddenDate){f("<input type='hidden' name='birthdate' />").val(n).appendTo(r)}var s=c;var t=c-h.maxAge;if(h.futureDates&&h.maxYear!=c){if(h.maxYear>1000){s=h.maxYear}else{s=c+h.maxYear}}while(s>=t){f("<option></option>").attr("value",s).text(s).appendTo(q);s--}for(var o=0;o<12;o++){f("<option></option>").attr("value",o+1).text(a[h.monthFormat][o]).appendTo(p)}for(var l=1;l<32;l++){f("<option></option>").attr("value",l).text(l).appendTo(m)}f(this).append(r);if(h.defaultDate){var i=new Date(h.defaultDate);q.val(i.getFullYear());p.val(i.getMonth()+1);m.val(i.getDate())}r.change(function(){var j=new Date(),k=j.getFullYear(),y=j.getMonth()+1,u=j.getDate(),x=q.val(),w=p.val(),z=m.val(),v=(new Date(x,w,0)).getDate();curMaxMonth=parseInt(p.children(":last").val()),curMaxDay=parseInt(m.children(":last").val());if(curMaxDay>v){while(curMaxDay>v){m.children(":last").remove();curMaxDay--}}else{if(curMaxDay<v){while(curMaxDay<v){curMaxDay++;m.append("<option value="+curMaxDay+">"+curMaxDay+"</option>")}}}if(!h.futureDates&&x==k){if(curMaxMonth>y){while(curMaxMonth>y){p.children(":last").remove();curMaxMonth--}m.children(":first").attr("selected","selected")}}if(x!=k&&curMaxMonth!=12){while(curMaxMonth<12){p.append("<option value="+(curMaxMonth+1)+">"+a[h.monthFormat][curMaxMonth]+"</option>");curMaxMonth++}}if((x*w*z)!=0){if(h.dateFormat=="bigEndian"){n=x+"-"+w+"-"+z}else{if(h.dateFormat=="littleEndian"){n=u+"-"+w+"-"+x}else{n=z+"-"+u+"-"+x}}f(this).children('input[type="hidden"]').val(n)}})})}})(jQuery);